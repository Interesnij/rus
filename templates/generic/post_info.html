{% load liked_user staticfiles %}

<script src="{% static 'scripts/jquery-3.2.1.min.js' %}" type="text/javascript"></script>

<div class="card-footer border-top py-2">

  <div class="row" style="color: rgba(255, 255, 255, 0.65);">
      <div class="col interaction" id="interaction">
            <span class="like content-color-secondary {% if object.votes.likes.all|user_in:request.user %} text-success {% endif %}" style="font-size:15px;cursor:pointer" id="like" data-id="{{ object.id }}" data-action="like" data-type="posts">
              <i class="material-icons">thumb_up</i>&nbsp;<span class="like-count" data-count="like">{% if object.votes.likes.count != 0 %}{{ object.votes.likes.count }}{% endif %}</span>
            </span>

            <span class="like_window">
              {% if object.votes.likes.all %}
            <div class="like_pop" style="margin:15px">
              <span>Лайков: {{ object.votes.likes.count }}</span>
              <br><br>
              <span style="display: flex;">
                {% for heart in object.votes.likes.all %}
                <a href="{% url 'user' pk=heart.user.pk %}" style="padding-right:10px">
                  <figure style="margin: 0;">
                    {% if heart.user.profile.avatar %}
                      <img src="{{ heart.user.profile.avatar.url }}" style="border-radius: 50px;width:50px;" alt="image">
                      {% else %}
                      <img src="{% static 'images/user.png' %}" alt="image" style="border-radius: 50px;width:50px;">
                      {% endif %}
                  </figure>
                  {{ heart.user.first_name }}
                </a>
                {% endfor %}
              </span>
            </div>
            {% endif %}
          </span>

          &nbsp;&nbsp;
          <span class="dislike content-color-secondary {% if object.votes.dislikes.all|user_in:request.user %} text-danger {% endif %}" style="font-size:15px;cursor:pointer" id="dislike" data-id="{{ object.id }}" data-action="dislike" data-type="posts">
            <i class="material-icons">thumb_down</i>&nbsp;<span class="dislike-count" data-count="dislike">{% if object.votes.dislikes.count %}{{ object.votes.dislikes.count }}{% endif %}</span>
          </span>

          <span class="dislike_window">
            {% if object.votes.dislikes.all %}
          <div class="dislike_pop" style="margin:15px">
            <span>Дизлайков: {{ object.votes.dislikes.count }}</span>
            <br><br>
            <span style="display: flex;">
              {% for sheet in object.votes.dislikes.all %}
              <a href="{% url 'user' pk=sheet.user.pk %}" style="padding-right:10px">
                <figure style="margin: 0;">
                  {% if sheet.user.profile.avatar %}
                    <img src="{{ sheet.user.profile.avatar.url }}" style="border-radius: 50px;width:50px;" alt="image">
                    {% else %}
                    <img src="{% static 'images/user.png' %}" alt="image" style="border-radius: 50px;width:50px;">
                    {% endif %}

                  </figure>
                  {{ sheet.user.first_name }}
                </a>
                {% endfor %}
            </span>
          </div>
          {% endif %}

        </span>

          &nbsp;&nbsp;
          <span class="content-color-secondary comment" style="font-size:15px;cursor:pointer">
            <i class="material-icons">chat</i>&nbsp;
            <span class="comment-count">
              {% if object.post_comment.count != 0 %}
                {{ object.post_comment.count }}
              {% endif %}
            </span>
          </span>
          &nbsp;&nbsp;
          <span class="content-color-secondary" style="font-size:15px;cursor:pointer">
            <i class="material-icons">share</i>&nbsp;
          </span>

      </div>
      <span class="col-auto content-color-secondary" style="font-size:12px">
        <i class="material-icons">visibility</i>&nbsp;{{ object.views }}
      </span>
  </div>

  <div class="load_comments" style="margin-top:25px"></div>
  
  <div class="load_form" style="display:none">
    <div class="row no-gutters">
      <form action="" id="replyPostForm" method="post">
        {% csrf_token %}
        <input type="hidden" name="parent" value="{{ parent.pk }}">

          <div class="col">
            <div class="input-group input-group-sm">
              <div class="input-group-prepend">
                  <button class="btn btn-link content-color-secondary" type="button"><i class="material-icons">face</i></button>
                  <button class="btn btn-link content-color-secondary text-hide-xs" type="button"><i class="material-icons">collections</i></button>
                  <button class="btn btn-link content-color-secondary" type="button"><i class="material-icons">camera_alt</i></button>
              </div>
              <textarea id="id_text" name="text" rows="2" class="form-control form-control-rounded" maxlength="280"></textarea>
            </div>
          </div>
          <div class="col-auto">
            <button class="btn btn-outline-primary btn-rounded btn-sm ml-2" type="submit">
              <i class="material-icons">send</i>
            </button>
        </div>
      </form>
    </div>
  </div>
</div>
