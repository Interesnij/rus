{% load liked_user staticfiles %}

<script src="{% static 'scripts/jquery.js' %}" type="text/javascript"></script>

<div class="card-footer border-top py-2">

  <div class="row">
      <div class="col interaction" id="interaction">
            <span class="like{% if object.post.votes.likes.all|user_in:request.user %} text-success {% endif %}"
                  id="like"
                  data-id="{{ object.id }}"
                  data-action="post_like"
                  data-type="post"
                  title="Нравится">
              <i class="material-icons">thumb_up</i>&nbsp;<span class="like-count" data-count="like">{% if object.post.votes.likes.count != 0 %}{{ object.post.votes.likes.count }}{% endif %}</span>
            </span>

            <span class="like_window">
              {% if object.post.votes.likes.all %}
            <div class="like_pop" style="margin:15px">
              <span>Лайков: {{ object.post.votes.likes.count }}</span>
              <br><br>
              <span style="display: flex;">
                {% for heart in object.post.votes.likes.all %}
                <a href="{% url 'user' pk=heart.user.pk %}" class="ajax" style="padding-right:10px">
                  <figure style="margin: 0;">
                    {% if heart.user.profile.avatar %}
                      <img src="{{ heart.user.profile.avatar.url }}" style="border-radius: 50px;width:50px;" alt="image">
                      {% else %}
                      <img src="{% static 'images/user.png' %}" alt="image" style="border-radius: 50px;width:50px;">
                      {% endif %}
                  </figure>
                  {{ heart.user.first_name }}
                </a>
                {% endfor %}
              </span>
            </div>
            {% endif %}
          </span>

          &nbsp;&nbsp;
          <span class="dislike{% if object.post.votes.dislikes.all|user_in:request.user %} text-danger {% endif %}"
                id="dislike"
                data-id="{{ object.id }}"
                data-action="post_dislike"
                data-type="post"
                title="Не нравится">
            <i class="material-icons">thumb_down</i>&nbsp;<span class="dislike-count" data-count="dislike">{% if object.post.votes.dislikes.count %}{{ object.post.votes.dislikes.count }}{% endif %}</span>
          </span>

          <span class="dislike_window">
            {% if object.post.votes.dislikes.all %}
          <div class="dislike_pop" style="margin:15px">
            <span>Дизлайков: {{ object.post.votes.dislikes.count }}</span>
            <br><br>
            <span style="display: flex;">
              {% for sheet in object.post.votes.dislikes.all %}
              <a href="{% url 'user' pk=sheet.user.pk %}" class="ajax" style="padding-right:10px">
                <figure style="margin: 0;">
                  {% if sheet.user.profile.avatar %}
                    <img src="{{ sheet.user.profile.avatar.url }}" style="border-radius: 50px;width:50px;" alt="image">
                    {% else %}
                    <img src="{% static 'images/user.png' %}" alt="image" style="border-radius: 50px;width:50px;">
                    {% endif %}

                  </figure>
                  {{ sheet.user.first_name }}
                </a>
                {% endfor %}
            </span>
          </div>
          {% endif %}

        </span>

          &nbsp;&nbsp;
          <span title="Комментарий" class="post_comment" style="font-size:15px;cursor:pointer">
            <i class="material-icons">chat</i>
            <span class="comment-count">
              {% if object.post.count_comments %}
                {{ object.post.count_comments }}
              {% endif %}
            </span>
          </span>
          &nbsp;&nbsp;
          <span title="Поделиться" class="repost">
            <i class="material-icons">share</i>&nbsp;
          </span>

      </div>
      <span class="col-auto text-secondary" title="Просмотры" style="font-size:12px">
        <i class="material-icons">visibility</i>&nbsp;{{ object.views }}
      </span>
  </div>
  <div class="load_comments" style="margin-top:25px"></div>

  </div>
