{% extends "base.html" %}
{% block title %}Сообщения{% endblock %}
{% load messager %}
{% block content %}

<div class="container main-container">
<div class="row">
    <div class="col-md-8 mt-3 chat_load_container">
<div class="px-0 card no-shadow pk_saver" chat-pk="{{ chat.pk }}" data-pk="{{ request.user.pk }}">
    <div class="card-header border-bottom">
        <div class="media w-100">
          {{ chat|get_chat_header:request.user.pk|safe }}

            <div class="dropdown d-inline-block">
              <a style="cursor:pointer" class="icon-circle icon-30 btn_default drop">
                <svg class="svg_info" fill="currentColor" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
              </a>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item pointer">Настроить</a>
                    <a class="dropdown-item pointer">Удалить</a>
                    <a class="dropdown-item pointer">Выйти</a>
                </div>
            </div>
        </div>
    </div>
    <div class="card-body bg-light-secondary chatview" id="chatcontent" style="height: 530px;">
        <ul class="chatlist app is_paginate">
          {% if object_list %}

          {% for object in object_list %}
            {% include 'desctop/chat/message/message.html' %}
          {% endfor %}
          {% else %}
          <div class="message_empty mb-3">
            <div class="card-body"></div>
            <h6 style="margin: 20px;text-align: center;">
               Пока сообщений нет.
            </h6>
          </div>
          {% endif %}
    </div>
    <div class="card-footer border-top">
      {% include 'desctop/chat/chat/form.html' %}
    </div>
</div>

</div>

<div class="col-12 col-md-4">
  <div class="card mb-3 mt-3">
      <div class="card-body">
        <a href="{% url 'user' pk=user.pk %}" class="ajax">
          <div class="media">
              <figure style="width:50px;">
                {% if user.get_avatar %}
                  <img src="{{ user.get_avatar }}" style="border-radius:50px" alt="image">
                {% else %}
                  <svg fill="currentColor" class="svg_default svg_default_50" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                {% endif %}
              </figure>
            <div class="media-body">
                <h6 class="my-0 mt-1">{{ user.get_full_name }}</h6>
                <p class="small">Сообщения</p>
            </div>
          </div>
        </a>
      </div>
      </div>
    <button class="btn btn-outline-success user_create_chat" data-pk="{{ user.pk }}" style="margin-bottom:15px;width:100%;">Создать чат</button>
    <br>
    <div class="card mb-2">
        <div class="card-header">
          <div class="media">
              <div class="media-body">
                <h6 class="mt-1">
                  <a class="ajax pointer">Избранное</a>
                </h6>
              </div>
          </div>
        </div>
      </div>
</div>
</div>
</div>
{% endblock %}
