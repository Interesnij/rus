{% load staticfiles %}

<script defer src="{% static 'scripts/popper.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/bootstrap.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jquery.cookie.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/cockie.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jquery.toast.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/websocketbridge.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/lazysizes.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jquery.waypoints.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/main.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/infinite.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/frend_follow.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/music.js' %}" type="text/javascript"></script>

<script>

var cssSelector = {jPlayer: "#jquery_jplayer_1",cssSelectorAncestor: ".main-header"};
var playlist = {{ request.user.get_json_my_playlist }};
var options = { swfPath: "/static/jquery.jplayer.swf", supplied: "oga, mp3", wmode: "window", smoothPlayBar: false, keyEnabled: true};
var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);

$(".tracks-container .track_item").click(function() {
    track = $(this);
    track_id = track.data('counter');
    tag_pk = $(this).parents('.tracks-container').data('pk');
    $.ajax({
      url: "/music/manage/temp_tag/" + tag_pk + "/",
      success: function(data) { body.find('.music-dropdown').html('').load("/user/load/playlist/" + '{{ request.user.uuid }}' + "/");}
    }); return false;'
    myPlaylist.play(track_id);

</script>
