{% load staticfiles %}
<script src="{% static 'scripts/ajax.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/popper.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/bootstrap.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/cockie.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/websocketbridge.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/lazysizes.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jquery.waypoints.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/infinite.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jquery.toast.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/get.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/post.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/main.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jquery.jplayer.min.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/jplayer.playlist.min.js' %}" type="text/javascript"></script>

{% if request.user.is_authenticated %}
<script>
$(document).ready(function(){
var cssSelector = {jPlayer: "#jquery_jplayer_1",cssSelectorAncestor: ".main-header"};
var playlist = {{ request.user.my_playlist }};
var options = { swfPath: "/static/jquery.jplayer.swf", supplied: "oga, mp3", wmode: "window", smoothPlayBar: false, keyEnabled: true};
var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);

function my_playlist_play(track_id) {
  myPlaylist.play(track_id);
};
function my_playlist_stop(track_id) {
  myPlaylist.pause(track_id);
};

function load_playlist(playlist_block, callback) {
  playlist_block.html('').load("/users/load/playlist/" + '{{ request.user.uuid }}' + "/");
}
});

$(document).on("click.bs.dropdown.data-api", ".noclose", function (e) { e.stopPropagation() });
$('head').append("<link rel='stylesheet' href='/static/styles/color/" + "{{ request.user.color_settings.color }}" + ".css' />")
</script>
{% endif %}
