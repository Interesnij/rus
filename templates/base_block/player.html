
<div id="jquery_jplayer_1" class="jp-jplayer"></div>
<div id="jp_container_1" class="jp-audio">
    <div class="jp-type-playlist">
        <div class="jp-gui jp-interface">
            <ul class="jp-controls">
                <li><label id="name-of-the-song-that-plays"></label></li>
                <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                <li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
                <li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
                <div class="clear"></div>
            </ul>
            <div class="jp-progress"><div class="jp-seek-bar"><div class="jp-play-bar"></div></div></div>
            <div class="jp-volume-bar"><div class="jp-volume-bar-value"></div></div>
            <div class="jp-time-holder"><div class="jp-current-time"></div></div>
            <div class="clear"></div>
            <ul class="jp-toggles">
                <li><a href="javascript:;" class="jp-shuffle" tabindex="1" title="Перемешать">shuffle</a></li>
                <li><a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="Восстановить порядок">shuffle off</a></li>
                <li></li><li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="повтор выкл">repeat off</a></li>
            </ul>
            <div class="clear"></div>
        </div>
    </div>
</div>
<div class="jp-playlist">
    <ul style="max-height: 480px;overflow: auto;">
        <li></li>
    </ul>
</div>

<script>

  var ready = (callback) => {
  if (document.readyState != "loading") callback();
  else document.addEventListener("DOMContentLoaded", callback);
  }
  {% if request.user.my_playlist %}
ready(() => {

  var cssSelector = {jPlayer: "#jquery_jplayer_1",cssSelectorAncestor: ".main-header"};
  var playlist = {{ request.user.my_playlist }};
  var options = { swfPath: "/static/jquery.jplayer.swf", supplied: "oga, mp3", wmode: "window", smoothPlayBar: false, keyEnabled: true};
  var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);
  document.querySelector(".music_header_btn").style.display = "block";

function my_playlist_play(track_id) {myPlaylist.play(track_id);};
function my_playlist_stop(track_id) {myPlaylist.pause(track_id);};
});
{% endif %}
</script>
