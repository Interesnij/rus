{% load staticfiles %}
<script src="{% static 'scripts/jquery-3.2.1.min.js' %}" type="text/javascript"></script>

<form action="" id="FORM-POST3" method="post">
  {% csrf_token %}
    {{ form_medium.content_medium }}
    <div class="card-footer">
      <button class="btn btn-secondary remove_form">Отмена</button>
      <button type="submit" class="btn btn-success float-right">Опубликовать</button>
   </div>
</form>

<script src="/static/scripts/jquery.toast.min.js" type="text/javascript"></script>
<script type="text/javascript">
    var frm2 = $('#FORM-POST3');
    frm2.submit(function () {
      CKEDITOR.instances.id_content_medium.updateElement();
        $.ajax({

            type: frm2.attr('method'),
            url: "{% url 'post_add_medium_user' %}",

            data: frm2.serialize(),
            success: function (data) {
              $("div.stream").prepend(data);
              $('#post_create').empty();
              $.toast({
                  heading: '{{ request.user.first_name }}',
                  text: 'Пост успешно создан!',
                  showHideTransition: 'fade',
                  icon: 'error'
              })
            },
            error: function(data) {
                console.log("Возникла непредвидинная ошибка!!");
            }
        });
        return false;
    });
</script>
<script>
  $( ".remove_form" ).click(function(){
    $('#post_create').empty();
  });
</script>


<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
