{% load humanize thumbnail liked_user %}

<div class="media comment">
    <figure>
        {% if comment.commenter.get_avatar %}
          <img src="{{ comment.commenter.get_avatar.file|thumbnail_url:'small_avatar' }}" class="pull-left" style="border-radius:50%;width:40px;" alt="User Image" class="user-image">
        {% else %}
          <svg fill="currentColor" class="svg_default svg_default_40" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
        {% endif %}
    </figure>
    <div class="media-body" style="overflow: inherit;">
        <h5 class="mt-0"><span class="commenter_first_name">{{ comment.commenter.first_name }}</span> {{ comment.commenter.last_name }}
            <small class="text-muted float-right">{{ comment.created|naturaltime }}</small>
        </h5>
        <p style="padding-bottom:10px;">{{ comment.text|safe }}</p>

        <div class="row" style="padding-bottom: 10px;">
          {% for object in comment.comment_photo.all %}
          <div class="col-lg-6 col-md-6">
              <img data-uuid="{{ object.uuid }}" data-id="{{ comment.commenter.pk }}" class="comment_image image_fit_small lazyload" style="cursor:pointer" data-src="{{ object.file.url }}" alt="img">
          </div>
          {% endfor %}
          {% for object in comment.comment_video.all %}
          <div class="col-md-6">
              <img class="image_fit_small lazyload" data-src="{{ object.image.url }}" alt="video">
              <div class="video_icon_play_v2 u_video_detail" data-counter="{{ forloop.counter0 }}"></div>

          </div>
          {% endfor %}
          {% for object in comment.comment_music.all %}
          <div class="col-md-12">
            <div class="media" data-counter="{{ forloop.counter0 }}">
                <figure style="cursor:pointer">
                  <a class="music_list_item">
                    {% if object.artwork_url %}
                      <img style="width:30px;heigth:auto" src="{{ object.artwork_url }}" />
                    {% else %}
                      <svg fill="currentColor" style="width:30px;heigth:30px" class='svg_default' viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 5h-3v5.5c0 1.38-1.12 2.5-2.5 2.5S10 13.88 10 12.5s1.12-2.5 2.5-2.5c.57 0 1.08.19 1.5.51V5h4v2zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"/></svg>
                    {% endif %}
                  </a>
                </figure>
                <div class="media-body">
                    <h6 class="music_list_item" style="cursor:pointer"><a>{{ object.title }}</a></h6>
                </div>
            </div>
          </div>
          {% endfor %}
        </div>

        <div class="">
            <div class="row">
                <div class="col" data-pk="{{ comment.pk }}">
                    {% include 'u_item_comment/info.html' %}
                    <div style="margin-top:10px;display:none">
                        <form action="" method="post" class="comment_form replyComment_form">
                            {% csrf_token %}
                            <input type="hidden" name="uuid" value="{{ user.uuid }}">
                            <input type="hidden" name="pk" value="{{ comment.pk }}">
                            <div class="row img_block"></div>

                            <div class="row no-gutters" style="margin-top: 0;">
                              {% include 'u_item_comment/form_dropdown.html' %}

                                <div class="col">
                                    <div class="input-group input-group-sm">
                                      <textarea name="text" class="form-control text-comment form-control-rounded"></textarea>
                                      <button class="btn btn-outline-primary btn-rounded btn-sm ml-2 u_replyComment" type="button">
                                          <svg class="svg_info" fill="currentColor" viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                                      </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <span style="cursor:pointer;display: flex; margin-top: 15px;" class="show_replies content-color-primary mb-0">
                      {% if comment.count_replies %}
                    ----  {{ comment.count_replies }} {{ comment.count_replies|rupluralize:"ответ,ответа,ответов" }} ----
                    <br><br>
                      {% endif %}
                    </span>
                    <span class="stream_reply_comments">
                      {% for reply in comment.get_replies %}
                        {% include 'u_item_comment/my_reply.html' with reply=reply  %}
                        <br>
                      {% endfor %}

                    </span>

                </div>
            </div>
        </div>
    </div>
</div>
