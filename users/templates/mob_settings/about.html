{% extends "base_mobile.html" %}
{% load staticfiles %}

{% block title %}Изменение профиля - обо мне{% endblock %}
{% block content %}
<style>
  .form-group input{
    margin-top: 10px;
  }
</style>
<div class="container mt-3">

  {% include 'mob_settings/menu.html' %}

    <form id="ABOUT-FORM" action="" method="post" class="contact-form">
        {% csrf_token %}
        <div class="card mb-3">
            <div class="card-header border-bottom">
                <h5 class="content-color-primary mb-0">Обо мне</h5>
            </div>
            <div class="card-body">
                <div class="row justify-content-center">
                  <div class="form-group">
                    <label>Биография</label>
                    <input type="text" value="{{ user.profile.bio }}" name="bio" id="id_bio" class="form-control" rows="4">
                  </div>
                </div>
            </div>
            <div class="card-footer">
                <button type="button" class="mb-2 btn btn-sm btn-success float-right ab_btn">Сохранить</button>
            </div>
        </div>
    </form>
  </div>

<script>
  document.querySelector(".ab_btn").addEventListener("click", (e) => {
   var form10 = document.getElementById('ABOUT-FORM');
   var formEntries = new FormData(form10);
   var options = {
     method: 'POST',
     body: formEntries,
   };
   fetch('{% url "user_about_form" pk=request.user.pk %}', options).then(data => {
     console.log("Все ОК")
   }).catch(error => {console.log("Все не ОК")})
})

</script>
{% endblock %}
