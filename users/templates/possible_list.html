{% load staticfiles thumbnail %}

<ul class="list-group possible-users-container ">
    {% for object in possible_list %}
    <li class="list-group-item">
        <div class="media">
            <figure>
                {% if object.get_avatar %}
                <img src="{{ object.get_avatar.file|thumbnail_url:'avatar' }}" style="border-radius:50px;width:50px;" alt="image">
                {% else %}
                <img class="thumb" src="{% static 'images/icons/person-24px.svg' %}" />
                {% endif %}
            </figure>
            <div class="media-body">
                <a href="{% url 'user' pk=object.pk %}" class="ajax">
                    <h6 class="my-0 mt-1">{{ object.get_full_name }}</h6>
                </a>
                <a href="" class="small">Написать сообщение</a>
            </div>
        </div>
    </li>
    {% endfor %}
    <div class="possible_load col-12 col-md-12">
        {% if possible_list.has_next %}
        <a style="display:flex;justify-content:center;" class="infinite-more-link" href="/users/detail/possible/{{ request.user.pk }}/?page={{ possible_list.next_page_number }}">
            <img style="width: 30px;" src="{% static 'images/loading.gif' %}">
        </a>
        {% endif %}
    </div>
</ul>

<script>
  var infinite = new Waypoint.Infinite({
    element: $('.possible-users-container')[0], onBeforePageLoad: function() { $('.possible_load').show(); }, onAfterPageLoad: function($items) { $('.possible_load').hide(); }
  });
</script>
