{% load staticfiles %}

{% if user != request.user and request.user.is_authenticated %}
<span style="display: flex;align-items: center;justify-content: center;margin-bottom: 10px;">

  {% if connect %}
  <div class="btn-group">
      <button type="button" class="btn btn-sm btn-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          У Вас в друзьях
      </button>
      <div class="dropdown-menu btn-secondary" x-placement="bottom-start">
          <a class="dropdown-item connect_delete" href="#">Убрать из друзей</a>
          <a class="dropdown-item user_block" href="#">Заблокировать</a>
          <a class="dropdown-item" href="#">Пожаловаться</a>
      </div>
  </div>
  {% endif %}

  {% if follow %}
  <div class="btn-group">
      <button type="button" class="btn btn-sm btn-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Вы подписаны
      </button>
      <div class="dropdown-menu" x-placement="bottom-start">
          <a class="dropdown-item follow_delete" href="#" >Отменить подписку</a>
          <a class="dropdown-item user_block" href="#">Заблокировать</a>
          <a class="dropdown-item" href="#">Пожаловаться</a>
      </div>
  </div>
  {% endif %}
  {% if follow2 %}
  <div class="btn-group">
      <button type="button" class="btn btn-sm btn-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Ваш подписчик
      </button>
      <div class="dropdown-menu" x-placement="bottom-start">
          <a class="dropdown-item connect_create" href="#">Добавить в друзья</a>
          <a class="dropdown-item user_block" href="#">Заблокировать</a>
          <a class="dropdown-item" href="#">Пожаловаться</a>
      </div>
  </div>
  {% endif %}

  {% if is_blocked %}
  <div class="btn-group">
      <button type="button" class="btn btn-sm btn-secondary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Заблокирован
      </button>
      <div class="dropdown-menu" x-placement="bottom-start">
          <a class="dropdown-item user_unblock" href="#">Разлокировать</a>
          <a class="dropdown-item" href="#">Пожаловаться</a>
      </div>
  </div>
  {% endif %}

  {% if not connect and not follow and not follow2 and not is_blocked %}
    <a href="#" class="btn btn-sm btn-success success-gradient follow_create">Добавить в друзья</a>
    <button style="margin-left:5px;" type="button" class="btn btn-sm btn-success success-gradient" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <svg style="width: 17px;height: 17px; "fill="#FFFFF8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
    </button>
    <div class="dropdown-menu" x-placement="bottom-start">
      <a class="dropdown-item user_block" href="#">Заблокировать</a>
      <a class="dropdown-item" href="#">Пожаловаться</a>
    </div>
  {% endif %}

</span>
<span style="display: flex;align-items: center;justify-content: center;">
  <a data-js="new_message" href="#" class="btn btn-sm btn-warning warning-gradient ml-2">Написать сообщение</a>
</span>

{% endif %}

<script>
  $('.user_block').on('click', function() {
  $.ajax({
      url: '{% url "user_block" user.pk %}',
      success: function (data) {
        $('#button_load').html('').load("{% url 'profile_button_reload' user.pk %}");
      }
  });
  });

  $('.user_unblock').on('click', function() {
  $.ajax({
      url: '{% url "user_unblock" user.pk %}',
      success: function (data) {
        $('#button_load').html('').load("{% url 'profile_button_reload' user.pk %}");
      }
  });
  });
  $('.follow_create').on('click', function() {
  $.ajax({
      url: '{% url "create_follow" user.pk %}',
      success: function (data) {
        $('#button_load').html('').load("{% url 'profile_button_reload' user.pk %}");
      }
  });
  });

  $('.follow_delete').on('click', function() {
  $.ajax({
      url: '{% url "delete_follow" user.pk %}',
      success: function (data) {
        $('#button_load').html('').load("{% url 'profile_button_reload' user.pk %}");
      }
  });
  });

  $('.connect_create').on('click', function() {
  $.ajax({
      url: '{% url "create_connect" user.pk %}',
      success: function (data) {
        $('#button_load').html('').load("{% url 'profile_button_reload' user.pk %}");
      }
  });
  });

  $('.connect_delete').on('click', function() {
  $.ajax({
      url: '{% url "delete_connect" user.pk %}',
      success: function (data) {
        $('#button_load').html('').load("{% url 'profile_button_reload' user.pk %}");
      }
  });
  });
</script>
