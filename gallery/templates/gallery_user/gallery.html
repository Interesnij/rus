{% extends "base.html" %}
{% load staticfiles  %}
{% block title %}
{% if user == request.user %}
Мои фотографии
{% else %}
Фотографии пользователя "{{ user.get_full_name }}"
{% endif %}
{% endblock %}
{% block content %}

<link rel="stylesheet" href="{% static 'styles/dropzone.css' %}" />

<div class="container-fluid" style="margin-top:30px">
    <div class="row">
        <div class="col-12 col-md-6">
            <h5 class="mt-1">
                {% if user == request.user %}
                Мои фотографии
                {% else %}
                Фотографии пользователя "{{ user.get_full_name }}"
                {% endif %}
            </h5>
            Фото: {{ user.count_photos }}
        </div>
        <div class="col-12 col-md-6">
            <div class="row">
                <div class="col-12 col-md-6">
                    <button id="albums_add" data-uuid="{{ user.uuid }}" class="btn btn-outline-success" style="margin-bottom:15px;width:100%" type="button">
                        Добавить альбом
                    </button>
                </div>
                <div class="col-12 col-md-6">
                    <button id="photos_add" class="btn btn-outline-success" style="margin-bottom:15px;width:100%" type="button">
                        Добавить фотографии
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="container mt-4 main-container">

    <div id="photos_add_window" style="display:none">
        <form id="add-photos" method="post" action="{% url 'photo_add_user' user.uuid %}" class="dropzone">
            {% csrf_token %}
        </form>
        <br><br>
    </div>

    <div class="infinite-container photo_stream">
        <div id="photos_load" style=""></div>
    </div>

    
</div>

<div class="card mb-4 add_fullscreen" style="display:none">
    <span class="add_fullscreen_hide">
        <img style="width:35px" src="{% static 'images/icons/close-24px.svg' %}" />
    </span>
    <div id="photo_add_loader" style="margin-top:30px"></div>
</div>

<div class="card mb-4 photo_fullscreen" style="display:none">
    <span class="photo_fullscreen_hide">
        <img style="width:35px" src="{% static 'images/icons/close-24px.svg' %}" />
    </span>
    <div id="photo_loader" style="margin-top:30px;position:relative;"></div>

</div>

<script defer src="{% static 'scripts/gallery.js' %}" type="text/javascript"></script>
<script defer src="{% static 'scripts/dropzone.js' %}" type="text/javascript"></script>
<script>
    $(document).ready(function() {
        $('#albums_load').html('').load("/gallery/user/photos/" + "{{ user.uuid }}");
        $('#photos_load').html('').load("/gallery/user/albums/" + "{{ user.uuid }}");
    });
</script>
{% endblock %}
