{% load is_avatar humanize thumbnail %}

<span class="text-hide-xs">
  {% if prev %}
    <a class="prev_photo" href="{% url 'user_photo' pk=user.pk uuid=prev.uuid %}">
      <svg class="svg_default" style="width:50px;height:50px;" fill="currentColor" viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>
    </a>
  {% endif %}
  {% if next %}
    <a class="next_photo" href="{% url 'user_photo' pk=user.pk uuid=next.uuid %}">
      <svg class="svg_default" style="width:50px;height:50px;" fill="currentColor" viewBox="0 0 24 24"><path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>
    </a>
  {% endif %}
</span>

<div class="mb-4 data_display" photo-pk="{{ user.pk }}" data-uuid="{{ object.uuid }}">
  <div class="row">
    <div class="col-lg-8 col-md-7 col-sm-12 order-1">
      <div class="card rounded-0 border-0 mb-4">
        {% if object.file %}
          <img style="width: 100%;" src="{{ object.file.url }}" alt="">
        {% else %}
          <svg class="svg_default" style="width:100%;height:auto" fill="currentColor" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
        {% endif %}
    </div>
    <span>
      <span style="cursor:pointer" id="user_photo_remove">Удалить</span>
    </span>
    &nbsp;<br>
      <span id="btn_console">
        <span>
          {% if object|it_is_avatar:request.user %}
            Это ваш аватар - <span style="cursor:pointer" class="u_unset_avatar">убрать аватар</span>
          {% else %}
            <span style="cursor:pointer" class="u_set_avatar">Сделать аватаром</span>
          {% endif %}
        </span>
        &nbsp;<br>
          <span>
            {% if object.is_public %}
            <span style="cursor:pointer" class="u_photo_on_private">Включить приватность</span>
            {% else %}
            <span style="cursor:pointer" class="u_photo_off_private">Отключить приватность</span>
            {% endif %}
          </span>
          &nbsp;<br>
          <span>
            {% if object.comments_enabled %}
              <span style="cursor:pointer" class="u_photo_off_comment">Выключить комментарии</span>
            {% else %}
              <span style="cursor:pointer" class="u_photo_on_comment">Включить комментарии</span>
            {% endif %}
          </span>
      </span>
    </div>
    <div class="col-lg-4 col-md-5 col-sm-12 order-2 ">

      <div class="card-header">
          <div class="media">
            <a href="{% url 'user' pk=object.creator.pk %}" class="ajax">
              <figure>
                {% if object.creator.get_avatar %}
                  <img src="{{ object.creator.get_avatar.file|thumbnail_url:'avatar' }}" style="border-radius: 50px;width:50px;" alt="image">
                {% else %}
                  <svg fill="currentColor" class="svg_default svg_default_50" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                {% endif %}
              </figure>
            </a>
              <div class="media-body">
                  <h6 class="mb-0">
                    <a href="{% url 'user' pk=object.creator.pk %}" class="ajax">
                      {{ object.creator.get_full_name }} &nbsp;
                    </a>
                  </h6>
                  <p class="mb-0">{{ object.created|naturaltime }}</p>
              </div>
          </div>
      </div>
      <span>
        {% if object.description %}
        {{ object.description }}
        <br><br>
          <span style="cursor:pointer" class="u_photo_edit">Редактировать</span>
        {% else %}
          <span style="cursor:pointer" class="u_photo_edit">Добавить описание</span>
        {% endif %}
      </span>
      <span id="block_description_form" style="display:none">
        <br>
        <form style="margin-top: 15px;">
            {% csrf_token %}
                <div class="col">
                    <div class="input-group input-group-sm">
                      {{ form_image.description }}
                    </div>
                </div>
                <div class="col-auto">
                    <button class="btn btn-outline-primary btn-rounded btn-sm ml-2" id="u_photo_description_btn" type="button">
                      <svg class="svg_info" fill="currentColor" viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
                    </button>
                </div>
        </form>
      </span>
    </div>
  </div>
</div>
