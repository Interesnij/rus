{% extends "base_mobile.html" %}
{% load liked_user %}
{% block title %}{{ album.title }} - альбом {{ user.first_name|gent }} {{ user.last_name|gent }}{% endblock %}
{% block content %}

<div class="container mt-3">
  <div class="card-header p-0" style="margin-bottom:30px">
    <div class="dropdown">
        <button type="button" class="btn btn-secondary dropdown-toggle" style="width:100%;" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            Альбом {{ album.title }}
        </button>
        <div class="dropdown-menu" x-placement="bottom-start" style="position: absolute; transform: translate3d(0px, 38px, 0px); top: 0px; width: 100%;">
            <a class="dropdown-item ajax" href="{% url 'user_gallery' pk=user.pk %}" data-html="#ajax">Галерея {{ user.first_name|gent }} {{ user.last_name|gent }}</a>
        </div>
    </div>
  </div>

  <div class="media mt-3" style="display:flex;align-items: flex-start">
    <h5 class="mt-1" style="flex: 1;">Альбом {{ album.title }}</h5>
    <span>Фото: {{ album.count_photo }}</span>
  </div>

<div id="album_photo_load" style="width: 100%;"></div>
</div>

<script>
  ready(() => {
    var link = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject( 'Microsoft.XMLHTTP' );
    link.open( 'GET', '/gallery/user/album_list/' + '{{ user.pk }}' + '{{ album.uuid }}/', true );
    link.onreadystatechange = function () {
      if ( link.readyState == 4 ) {
          if ( link.status == 200 ) {
              var album_photo_load = document.getElementById("album_photo_load");
              album_photo_load.innerHTML = link.responseText;
          }
      }
  };
  link.send( null );
  });
</script>
{% endblock %}
