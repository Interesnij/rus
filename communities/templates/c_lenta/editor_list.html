{% load humanize thumbnail %}

{% if object.article %}
    {% include 'item_community/admin_article.html' with article=article  %}
{% endif %}

{% if object.post %}
    {% include 'item_community/admin_post.html' with post=post  %}
{% endif %}

<div class="infinite-container">
  <div class="stream-update">
    <a href=""><span class="new-posts"></span> Загрузить новые записи</a>
  </div>

  <span class="community_stream">
    {% if object_list %}

    {% for object in object_list %}

      {% if object.article %}
      <div class="card mb-4 infinite-item">
        <div class="card-header">
            <div class="media">
              <a href="{% url 'community_detail' pk=object.community.pk %}" class="ajax">
                <figure>
                  {% if object.community.get_avatar %}
                    <img src="{{ object.community.get_avatar.file|thumbnail_url:'avatar' }}" style="border-radius: 50px;width:50px;" alt="image">
                  {% else %}
                    <svg fill="currentColor" class="svg_default svg_default_50" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                  {% endif %}
                </figure>
              </a>
                <div class="media-body">
                    <h6 class="mb-0">
                      <a href="{% url 'community_detail' pk=object.community.pk %}" class="ajax">
                        {{ object.community.name }} &nbsp;
                      </a>
                      <span class="is_fixed" style="color: #888888;font-size: 13px;{% if not object.is_fixed %}display:none;{% endif %}">закреплено</span>
                    </h6>
                    <p class="mb-0">{{ object.created|naturaltime }}</p>
                </div>
                <div class="dropdown d-inline-block">
                    <a style="cursor:pointer" class="icon-circle icon-30 dropdown-toggle caret-none" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <svg class="svg_info svg_default" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <span style="cursor:pointer" class="dropdown-item item_community_remove">Удалить запись</span>
                        <span style="cursor:pointer" class="dropdown-item">Редактировать</span>
                        <span style="cursor:pointer">
                          {% if object.is_fixed %}
                          <span class="dropdown-item item_community_unfixed">Открепить</span>
                          {% else %}
                          <span class="dropdown-item item_community_fixed">Закрепить</span>
                          {% endif %}
                        </span>
                        <span style="cursor:pointer">
                          {% if object.comments_enabled %}
                            <span class="dropdown-item item_community_off_comment">Выключить комментарии</span>
                          {% else %}
                            <span class="dropdown-item item_community_on_comment">Включить комментарии</span>
                          {% endif %}
                        </span>
                        <span style="cursor: pointer;" class="dropdown-item js-textareacopybtn">Скопировать ссылку
                          <textarea style="opacity: 0;height:1px;width:1px" class="js-copytextarea">http://трезвый.рус{% url 'community_item_detail' uuid=object.uuid %}</textarea>
                        </span>
                    </div>
                </div>
            </div>
        </div>

          <div class="card-body c_article_detail" style="cursor:pointer">
              <div class="jumbotron mb-4 bg-dark text-center has-background-img position-relative box-shadow">
                  <div class="row align-items-center no-gutters">
                      <figure class="background-img">
                          {% if object.article.g_image %}
                          <img class="lazyload" data-src="{{ object.article.g_image.url }}" alt="">
                          {% else %}
                          <img class="lazyload" data-src="/static/images/no-image.jpg" />
                          {% endif %}
                      </figure>
                      <div class="container">
                          <i class="figure avatar120 mr-0 fa fa-gift rounded-circle bg-none text-white border-white "></i>
                          <br>
                          <h2 class="text-white">{{ object.article.title }}</h2>
                          <p class="lead text-white">{{ object.community.name }}</p>
                          <hr class="my-3">
                          <a class="btn btn-primary" role="button">Читать</a>
                      </div>
                  </div>
              </div>
          </div>

          {% include 'item_community/info.html' %}
      </div>
      {% endif %}

      {% if object.post %}
      <div class="card mb-4 infinite-item">

        <div class="card-header">
            <div class="media">
              <a href="{% url 'community_detail' pk=object.community.pk %}" class="ajax">
                <figure>
                  {% if object.community.get_avatar %}
                    <img src="{{ object.community.get_avatar.file|thumbnail_url:'avatar' }}" style="border-radius: 50px;width:50px;" alt="image">
                  {% else %}
                    <svg fill="currentColor" class="svg_default svg_default_50" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                  {% endif %}
                </figure>
              </a>
                <div class="media-body">
                    <h6 class="mb-0">
                      <a href="{% url 'community_detail' pk=object.community.pk %}" class="ajax">
                        {{ object.community.name }} &nbsp;
                      </a>
                      <span class="is_fixed" style="color: #888888;font-size: 13px;{% if not object.is_fixed %}display:none;{% endif %}">закреплено</span>
                    </h6>
                    <p class="mb-0">{{ object.created|naturaltime }}</p>
                </div>
                <div class="dropdown d-inline-block">
                    <a style="cursor:pointer" class="icon-circle icon-30 dropdown-toggle caret-none" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <svg class="svg_info svg_default" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <span style="cursor:pointer" class="dropdown-item item_community_remove">Удалить запись</span>
                        <span style="cursor:pointer" class="dropdown-item">Редактировать</span>
                        <span style="cursor:pointer">
                          {% if object.is_fixed %}
                          <span class="dropdown-item item_community_unfixed">Открепить</span>
                          {% else %}
                          <span class="dropdown-item item_community_fixed">Закрепить</span>
                          {% endif %}
                        </span>
                        <span style="cursor:pointer">
                          {% if object.comments_enabled %}
                            <span class="dropdown-item item_community_off_comment">Выключить комментарии</span>
                          {% else %}
                            <span class="dropdown-item item_community_on_comment">Включить комментарии</span>
                          {% endif %}
                        </span>
                        <span style="cursor: pointer;" class="dropdown-item js-textareacopybtn">Скопировать ссылку
                          <textarea style="opacity: 0;height:1px;width:1px" class="js-copytextarea">http://трезвый.рус{% url 'community_item_detail' uuid=object.uuid %}</textarea>
                        </span>
                    </div>
                </div>
            </div>
        </div>

          {% if object.is_repost %}
          {% include 'item_community/repost.html' %}
          {% endif %}

          <div class="card-body c_fullscreen" style="cursor:pointer">
            {% if object.post.text %}
              <p class="">{{ object.post.text|linebreaks }}</p>
            {% endif %}
            {% if object.post.image %}
              <p class="">{{ object.post.image.url }}</p>
            {% endif %}
            {% if object.post.doc %}
              <p class="">{{ object.post.doc }}</p>
            {% endif %}
          </div>

          {% include 'item_community/info.html' %}
      </div>
      {% endif %}

    {% endfor %}

    {% endif %}
  </span>
</div>

{% if not object and not object_list %}
<div class="card mb-4 post_empty" style="align-items: center;justify-content:center;">
  <div class="card-body">
  <svg fill="currentColor" class="thumb_big svg_default" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path fill="currentColor" d="M22 13h-8v-2h8v2zm0-6h-8v2h8V7zm-8 10h8v-2h-8v2zm-2-8v6c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h6c1.1 0 2 .9 2 2zm-1.5 6l-2.25-3-1.75 2.26-1.25-1.51L3.5 15h7z"/></svg>
  </div>
  <h6 style="margin: 20px;text-align: center;"> Пока ничего нет...</h6>
</div>
{% endif %}
