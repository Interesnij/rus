{% load staticfiles thumbnail %}
<script type="text/javascript" src="/static/scripts/cmsplayer.js"></script>

{% if all_tracks %}
<div id="jquery_jplayer_1" class="jp-jplayer"></div>
        <div id="jp_container_1" class="jp-audio">

            <div class="jp-type-playlist">
                <div class="jp-gui jp-interface">
                    <ul class="jp-controls">
                        <li>
                            <label id="name-of-the-song-that-plays"></label>
                        </li>
                        <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                        <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                        <li><a href="javascript:;" class="jp-previous" tabindex="1">previous</a></li>
                        <li><a href="javascript:;" class="jp-next" tabindex="1">next</a></li>
                        <div class="clear"></div>
                    </ul>
                    <!-- Прогресс бар -->
                    <div class="jp-progress">
                        <div class="jp-seek-bar">
                            <div class="jp-play-bar"></div>
                        </div>
                    </div>
                    <!-- Регулятор громкости -->
                    <div class="jp-volume-bar">
                        <div class="jp-volume-bar-value"></div>
                    </div>
                    <!-- Остаток времени -->
                    <div class="jp-time-holder">
                        <div class="jp-current-time"></div>
                    </div>

                    <div class="clear"></div>

                    <!-- Кнопки повторения и перемешивания плейлиста -->
                    <ul class="jp-toggles">
                        <li>
                            <a href="javascript:;" class="jp-shuffle" tabindex="1" title="shuffle">shuffle</a>
                        </li>
                        <li>
                            <a href="javascript:;" class="jp-shuffle-off" tabindex="1" title="shuffle off">shuffle off</a>
                        </li>
                        <li>
                            <a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a>
                        </li>
                        <li>
                            <a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a>
                        </li>
                    </ul>
                    <div class="clear"></div>
                </div>

            </div>
        </div>
        {% block playlist %}
         <div id="playlist_list_{{ player.id }}" class="cmsplaylist">
             <ul>
                {% for object in player.playlist %}
                  {% include "music/track.html" %}
                {% endfor %}
              </ul>
          </div>
        {% endblock %}

{% else %}
<div class="card mb-4" style="align-items: center;justify-content:center;">
  <div class="card-body">
  <svg fill="currentColor" class="thumb_big svg_default" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>
  </div>
  <h6 style="margin-bottom: 20px;"> Композиций нет...</h6>
</div>
{% endif %}

<script>
  var all_music_infinite = new Waypoint.Infinite({element: $('.all-music-container')[0], onBeforePageLoad: function() { $('.music-load').show(); }, onAfterPageLoad: function($items) { $('.music-load').hide(); }});


  $(document).ready(function(){
  	    var player = $('#jquery_jplayer_1');
  		player.cmsPlayer(
  			{
  			    {% block javascript_initdata %}
  			    playlist: {{ player.get_json_playlist }},
  			    autoplay: {{ player.get_json_autoplay }},
  			    playerid: "{{ player.id }}",
  			    autonext: true,
  				cssPrefix: 'jqjp_{{ player.id }}',
  				swfPath: 'http://' + window.location.host + {{ player.get_base_path }},
  				customCssIds: true
  				{% endblock %}
  			}
  		);
  	});

</script>
